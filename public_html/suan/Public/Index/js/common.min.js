requirejs.config({
	baseUrl: "./",
	map: {
		"*": {
			css: "./css.min.js"
		}
	},
	shim: {},
	paths: {
		"ffsm.layer": "./layer/layer",
		"ffsm.calendar": "./calendar.min",
		"ffsm.ajaxForm": "./ajaxForm.min",
		"ffsm.zhChinese": "./zhChinese.min"
	}
}), define("layer", ["ffsm.layer"], function() {
	layer.config({
		path: "./layer/"
	})
}), $(function() {
	if($.ajaxSetup({
			complete: function(a) {},
			data: {},
			error: function(a, e, t) {
				require(["layer"], function() {
					layer.msg("Ajax请求出现错误：<br/>" + this.url, {
						icon: 2,
						time: 2e3
					}, function() {})
				})
			}
		}), /msie/.test(navigator.userAgent.toLowerCase()) && $.ajaxSetup({
			cache: !1
		}), "" !== document.createElement("input").placeholder && $("[placeholder]").focus(function() {
			var a = $(this);
			a.val() == a.attr("placeholder") && (a.val(""), a.removeClass("placeholder"))
		}).blur(function() {
			var a = $(this);
			"" != a.val() && a.val() != a.attr("placeholder") || (a.addClass("placeholder"), a.val(a.attr("placeholder")))
		}).blur().parents("form").submit(function() {
			$(this).find("[placeholder]").each(function() {
				var a = $(this);
				a.val() == a.attr("placeholder") && a.val("")
			})
		}), $(".J_pay_remind").click(function() {
			require(["layer"], function() {
				setTimeout(function() {
					layer.msg("付费后才能看")
				}, 50)
			})
		}), $(".Js_date").length > 0 && require(["ffsm.calendar", "css!./calendar.min.css"], function() {
			for(var a = 0, e = $(".Js_date").length; a < e; a++) {
				(new lCalendar).init("#" + $(".Js_date").eq(a).attr("id"))
			}
		}), $("#protocolShowBtn").length) {
		var protocolPopBox = $("#protocolPopBox"),
			popScrollTop = 0;
		$("#protocolShowBtn").on("click", function() {
			protocolPopBox.show(), popScrollTop = $(document).scrollTop(), $("body").addClass("base_popup"), $("body").css("top", -popScrollTop)
		}), $("#protocolHideBtn").on("click", function() {
			$("body").removeClass("base_popup"), $(document).scrollTop(popScrollTop), protocolPopBox.hide()
		})
	}
	var ajaxForm_list = $("form.J_ajaxForm");
	ajaxForm_list.length && require(["ffsm.ajaxForm", "layer"], function() {
		var layer_load, isBrowserMsie = /msie/.test(navigator.userAgent.toLowerCase());
		isBrowserMsie && ajaxForm_list.on("submit", function(a) {
			a.preventDefault()
		});
		var lock = !1;
		$(".J_ajax_submit_btn").on("click", function(e) {
			if($("#agreeInput").length && !$("#agreeInput").is(":checked")) return layer.msg("您未同意个人隐私协议"), !1;
			if(lock) return !1;
			lock = !0, e.preventDefault();
			var btn = $(this),
				form = btn.parents("form.J_ajaxForm"),
				formArr, callback = function(a, e) {
					var t = a.msg,
						r = "";
					t.msg && (t = a.msg.msg, r = a.msg.field), a.code > 0 ? layer.msg(t, {
						icon: 1,
						time: 2e3
					}, function() {
						a.url && (window.location.href = a.url)
					}) : a.code <= 0 && (layer.msg(t, {
						time: 1e3
					}), e.removeProp("disabled").removeClass("disabled"), "" != r && $("#" + r).focus())
				};
			"" !== btn.data("callback") && void 0 != btn.data("callback") && (callback = eval(btn.data("callback"))), isBrowserMsie && form.find("[placeholder]").each(function() {
				var a = $(this);
				a.val() == a.attr("placeholder") && a.val("")
			}), form.ajaxSubmit({
				url: btn.data("action") ? btn.data("action") : form.attr("action"),
				dataType: "json",
				beforeSubmit: function(a, e, t) {
					var r = btn.text();
					formArr = a, btn.text(r + "中...").prop("disabled", !0).addClass("disabled"), layer_load = layer.load(0, {
						shade: !1
					})
				},
				success: function(a, e, t, r) {
					if(a.code > 0 && window.localStorage)
						for(var o = 0, l = formArr.length; o < l; o++) try {
							localStorage.setItem(formArr[o].name, formArr[o].value)
						} catch(a) {}
					var s = btn.text();
					btn.removeClass("disabled").text(s.replace("中...", "")).parent().find("span").remove(), layer.close(layer_load), callback(a, btn), setTimeout(function() {
						lock = !1
					}, 2e3)
				}
			})
		})
	});
	var sexCheckbox = $(".J_sex");
	if(sexCheckbox.length && sexCheckbox.children("span").on("click", function() {
			$(this).addClass("cur"), $(this).siblings("span").removeClass("cur");
			var a = $(this).data("value");
			$(this).parent().find("input").val(a)
		}), $("form.J_ajaxForm").length > 0)
		for(var formInput = $("form.J_ajaxForm").find("input"), inp = 0, inpMax = formInput.length; inp < inpMax; inp++) {
			var fthis = formInput.eq(inp),
				fname = fthis.attr("name");
			if("" != fname && window.localStorage && localStorage.getItem(fname)) switch(!0) {
				case /gender/.test(fname):
					1 == localStorage.getItem(fname) ? fthis.parent(".J_sex").children("span[data-value=1]").addClass("cur").siblings("span").removeClass("cur") : fthis.parent(".J_sex").children("span[data-value=0]").addClass("cur").siblings("span").removeClass("cur"), fthis.val(localStorage.getItem(fname));
					break;
				case /birthday/.test(fname):
					$("#" + fname).attr("data-date", localStorage.getItem(fname));
					break;
				default:
					if("true" == fthis.attr("nolocal")) break;
					"text" == fthis.attr("type") && fthis.val(localStorage.getItem(fname))
			}
		}
	require(["ffsm.zhChinese"])
});